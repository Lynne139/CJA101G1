<div class="panel mb-4">
  <h2 class="panel-title mb-4">餐廳區段與時段管理</h2>

  <!-- 餐廳選擇器 -->
  <form method="get" th:action="@{/admin/resto_timeslot/select}">
  <div class="row mb-3">
    <div class="col-12">
      <select id="restoSelect" class="form-select w-100" name="restoId"
              onchange="this.form.submit()">
        <option disabled th:selected="${selectedRestoId == null}">--- 請選擇餐廳 --</option>
        <option th:each="resto : ${restoList}"
                th:value="${resto.restoId}" th:text="${resto.restoName}"
                th:selected="${resto.restoId == selectedRestoId}"></option>
      </select>
    </div>
  </div>
</form>


  <div class="row">
    <!-- 區段清單 -->
    <div class="col-md-4">
      <div class="panel mb-4">
        <div
          class="panel-heading d-flex justify-content-between align-items-center mb-2">
          <h3 class="panel-subtitle mb-0">餐廳區段</h3>
          <button class="btn btn_accent btn-sm">新增區段</button>
        </div>
        <ul class="list-group list-group-flush">
          <li
            class="list-group-item bg-transparent d-flex justify-content-between align-items-center"
            th:each="period : ${periodList}"><span
            th:text="${period.name}">區段名稱</span> <span>
              <button class="btn_icon btn_edit" title="編輯"
                th:data-id="${period.id}">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn_icon btn_delete" title="刪除"
                th:data-id="${period.id}">
                <i class="fas fa-trash"></i>
              </button>
          </span></li>
        </ul>
      </div>
    </div>

    <!-- 時段對應表 -->
    <div class="col-md-8">
      <div class="panel transparent mb-4">
        <div
          class="panel-heading d-flex justify-content-between align-items-center mb-2">
          <h3 class="panel-subtitle mb-0">時段對應區段</h3>
          <button class="btn btn_secondary btn-sm">新增時段</button>
        </div>
        <div class="table-responsive table-wrapper">
          <table class="table align-top mb-0">
            <thead class="table_head align-top">
              <tr>
                <th>時段</th>
                <th th:each="period : ${periodList}"
                  th:text="${period.name}">區段</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="slot : ${timeslotList}" class="border-bottom">
                <td th:text="${slot.timeText}">07:00</td>
                <td class="text-center" th:each="period : ${periodList}">
                  <input type="radio"
                  th:name="'selectedPeriodMap[' + ${slot.id} + ']'"
                  th:value="${period.id}"
                  th:checked="${selectedPeriodMap[slot.id]} == period.id"
                  class="btn-outline-primary border rounded">
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
