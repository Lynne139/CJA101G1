<div class="main_resto_timeslot">

      <div class="mt-5 mb-5">
        <h2 class="page_title">餐廳資訊</h2>
      </div>

  <!-- 餐廳選擇器 -->
  <form class="select_resto filter panel p-4 mb-4" method="get" th:action="@{/admin/resto_timeslot}">
  <div class="row mb-3">
    <div class="col-12">
      <label class="form-label text-muted mt-2" th:if="${selectedRestoId == null}">請先選擇餐廳以顯示區段與時段</label>
      <select id="restoSelect" class="form-select w-100" name="restoId"
              onchange="this.form.submit()">
        <option selected disabled>--- 餐廳 ---</option>
        <option th:each="resto : ${restoList}"
                th:value="${resto.restoId}" th:text="${resto.restoName}"
                th:selected="${resto.restoId == selectedRestoId}"></option>
      </select>
  
    </div>
  </div>
</form>

  <div class="row">
    <!-- 區段清單 -->
    <div class="col-md-4">
      <div class="panel mb-4">
        <div
          class="panel-heading d-flex justify-content-between align-items-center mb-2">
          <h3 class="panel-subtitle mb-0">餐廳區段</h3>
          <button class="btn btn_accent btn-sm">新增</button>
        </div>
        <ul class="list-group list-group-flush" th:if="${periodList != null}">
          <li
            class="list-group-item bg-transparent d-flex justify-content-between align-items-center"
            th:each="period : ${periodList}">
            <span th:text="${period.periodName}">區段名稱</span> 
            <span>
              <button class="btn_icon btn_edit" title="編輯"
                th:data-id="${period.periodId}">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn_icon btn_delete" title="刪除"
                th:data-id="${period.periodId}">
                <i class="fas fa-trash"></i>
              </button>
          </span></li>
        </ul>
      </div>
    </div>

    <!-- 時段對應表 -->
    <div class="col-md-8">
      <div class="panel transparent mb-4">
        <div
          class="panel-heading d-flex justify-content-between align-items-center mb-2">
          <h3 class="panel-subtitle mb-0">時段對應區段</h3>
          <button class="btn btn_accent btn-sm">新增</button>
        </div>
        <div class="table-responsive table-wrapper">
          <table class="table align-top mb-0">
            <thead class="table_head align-top">
              <tr>
                <th>時段</th>
                <th th:each="period : ${periodList}"
                  th:text="${period.periodName}">區段</th>
              </tr>
            </thead>
            <tbody th:if="${timeslotList != null}">
              <tr th:each="timeslot : ${timeslotList}" class="border-bottom">
                <td th:text="${timeslot.timeslotName}"></td>
                <td class="text-center" th:each="period : ${periodList}">
                  <input type="radio"
                  th:name="'selectedPeriodMap[' + ${timeslot.timeslotId} + ']'"
                  th:value="${period.periodId}"
                  th:checked="${selectedPeriodMap[timeslot.timeslotId]} == period.periodId"
                  class="btn-outline-primary border rounded">
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  
  
</div>
